"use strict";(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{var c=b();Object.keys(c).forEach(function(d){a[d]=c[d]})}}(this,function(){function m(x,w,y){y=y||new Float32Array(3);y[0]=x[0]-w[0];y[1]=x[1]-w[1];y[2]=x[2]-w[2];return y}function p(w,y){y=y||new Float32Array(3);var x=Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);if(x>0.00001){y[0]=w[0]/x;y[1]=w[1]/x;y[2]=w[2]/x}return y}function c(x,w,y){y=y||new Float32Array(3);y[0]=x[1]*w[2]-x[2]*w[1];y[1]=x[2]*w[0]-x[0]*w[2];y[2]=x[0]*w[1]-x[1]*w[0];return y}function r(w){w=w||new Float32Array(16);w[0]=1;w[1]=0;w[2]=0;w[3]=0;w[4]=0;w[5]=1;w[6]=0;w[7]=0;w[8]=0;w[9]=0;w[10]=1;w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return w}function k(w,x){x=x||new Float32Array(16);x[0]=w[0];x[1]=w[4];x[2]=w[8];x[3]=w[12];x[4]=w[1];x[5]=w[5];x[6]=w[9];x[7]=w[13];x[8]=w[2];x[9]=w[6];x[10]=w[10];x[11]=w[14];x[12]=w[3];x[13]=w[7];x[14]=w[11];x[15]=w[15];return x}function n(C,A,w,B){B=B||new Float32Array(16);var z=p(m(C,A));var y=p(c(w,z));var x=p(c(z,y));B[0]=y[0];B[1]=y[1];B[2]=y[2];B[3]=0;B[4]=x[0];B[5]=x[1];B[6]=x[2];B[7]=0;B[8]=z[0];B[9]=z[1];B[10]=z[2];B[11]=0;B[12]=C[0];B[13]=C[1];B[14]=C[2];B[15]=1;return B}function d(x,y,z,w,C){C=C||new Float32Array(16);var B=Math.tan(Math.PI*0.5-0.5*x);var A=1/(z-w);C[0]=B/y;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=B;C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=(z+w)*A;C[11]=-1;C[12]=0;C[13]=0;C[14]=z*w*A*2;C[15]=0;return C}function l(B,y,x,A,z,w,C){C=C||new Float32Array(16);C[0]=2/(y-B);C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2/(A-x);C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=2/(z-w);C[11]=0;C[12]=(B+y)/(B-y);C[13]=(x+A)/(x-A);C[14]=(z+w)/(z-w);C[15]=1;return C}function v(x,B,w,A,z,y){var E=B-x;var D=A-w;var C=y-z;dst[0]=2*z/E;dst[1]=0;dst[2]=0;dst[3]=0;dst[4]=0;dst[5]=2*z/D;dst[6]=0;dst[7]=0;dst[8]=(x+B)/E;dst[9]=(A+w)/D;dst[10]=-(y+z)/C;dst[11]=-1;dst[12]=0;dst[13]=0;dst[14]=-2*z*y/C;dst[15]=0;return dst}function u(x,w,z,y){y=y||new Float32Array(16);y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=0;y[5]=1;y[6]=0;y[7]=0;y[8]=0;y[9]=0;y[10]=1;y[11]=0;y[12]=x;y[13]=w;y[14]=z;y[15]=1;return y}function i(w,z){z=z||new Float32Array(16);var y=Math.cos(w);var x=Math.sin(w);z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=0;z[5]=y;z[6]=x;z[7]=0;z[8]=0;z[9]=-x;z[10]=y;z[11]=0;z[12]=0;z[13]=0;z[14]=0;z[15]=1;return z}function t(w,z){z=z||new Float32Array(16);var y=Math.cos(w);var x=Math.sin(w);z[0]=y;z[1]=0;z[2]=-x;z[3]=0;z[4]=0;z[5]=1;z[6]=0;z[7]=0;z[8]=x;z[9]=0;z[10]=y;z[11]=0;z[12]=0;z[13]=0;z[14]=0;z[15]=1;return z}function h(w,z){z=z||new Float32Array(16);var y=Math.cos(w);var x=Math.sin(w);z[0]=y;z[1]=x;z[2]=0;z[3]=0;z[4]=-x;z[5]=y;z[6]=0;z[7]=0;z[8]=0;z[9]=0;z[10]=1;z[11]=0;z[12]=0;z[13]=0;z[14]=0;z[15]=1;return z}function g(D,J,G){G=G||new Float32Array(16);var K=D[0];var I=D[1];var H=D[2];var B=Math.sqrt(K*K+I*I+H*H);K/=B;I/=B;H/=B;var w=K*K;var E=I*I;var C=H*H;var F=Math.cos(J);var L=Math.sin(J);var A=1-F;G[0]=w+(1-w)*F;G[1]=K*I*A+H*L;G[2]=K*H*A-I*L;G[3]=0;G[4]=K*I*A-H*L;G[5]=E+(1-E)*F;G[6]=I*H*A+K*L;G[7]=0;G[8]=K*H*A+I*L;G[9]=I*H*A-K*L;G[10]=C+(1-C)*F;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function b(z,x,w,y){y=y||new Float32Array(16);y[0]=z;y[1]=0;y[2]=0;y[3]=0;y[4]=0;y[5]=x;y[6]=0;y[7]=0;y[8]=0;y[9]=0;y[10]=w;y[11]=0;y[12]=0;y[13]=0;y[14]=0;y[15]=1;return y}function f(X,U,ad){ad=ad||new Float32Array(16);var ab=X[0*4+0];var aa=X[0*4+1];var Y=X[0*4+2];var V=X[0*4+3];var D=X[1*4+0];var C=X[1*4+1];var B=X[1*4+2];var A=X[1*4+3];var P=X[2*4+0];var O=X[2*4+1];var N=X[2*4+2];var M=X[2*4+3];var ae=X[3*4+0];var ac=X[3*4+1];var Z=X[3*4+2];var W=X[3*4+3];var K=U[0*4+0];var I=U[0*4+1];var G=U[0*4+2];var E=U[0*4+3];var T=U[1*4+0];var S=U[1*4+1];var R=U[1*4+2];var Q=U[1*4+3];var z=U[2*4+0];var y=U[2*4+1];var x=U[2*4+2];var w=U[2*4+3];var L=U[3*4+0];var J=U[3*4+1];var H=U[3*4+2];var F=U[3*4+3];ad[0]=ab*K+aa*T+Y*z+V*L;ad[1]=ab*I+aa*S+Y*y+V*J;ad[2]=ab*G+aa*R+Y*x+V*H;ad[3]=ab*E+aa*Q+Y*w+V*F;ad[4]=D*K+C*T+B*z+A*L;ad[5]=D*I+C*S+B*y+A*J;ad[6]=D*G+C*R+B*x+A*H;ad[7]=D*E+C*Q+B*w+A*F;ad[8]=P*K+O*T+N*z+M*L;ad[9]=P*I+O*S+N*y+M*J;ad[10]=P*G+O*R+N*x+M*H;ad[11]=P*E+O*Q+N*w+M*F;ad[12]=ae*K+ac*T+Z*z+W*L;ad[13]=ae*I+ac*S+Z*y+W*J;ad[14]=ae*G+ac*R+Z*x+W*H;ad[15]=ae*E+ac*Q+Z*w+W*F;return ad}function o(am,ak){ak=ak||new Float32Array(16);var E=am[0*4+0];var C=am[0*4+1];var B=am[0*4+2];var z=am[0*4+3];var ap=am[1*4+0];var ao=am[1*4+1];var an=am[1*4+2];var al=am[1*4+3];var af=am[2*4+0];var ae=am[2*4+1];var ad=am[2*4+2];var ab=am[2*4+3];var H=am[3*4+0];var G=am[3*4+1];var F=am[3*4+2];var D=am[3*4+3];var ac=ad*D;var aa=F*ab;var Y=an*D;var W=F*al;var T=an*ab;var R=ad*al;var P=B*D;var N=F*z;var M=B*ab;var K=ad*z;var Z=B*al;var X=an*z;var V=af*G;var U=H*ae;var S=ap*G;var Q=H*ao;var O=ap*ae;var L=af*ao;var J=E*G;var I=H*C;var A=E*ae;var y=af*C;var x=E*ao;var w=ap*C;var aj=(ac*ao+W*ae+T*G)-(aa*ao+Y*ae+R*G);var ai=(aa*C+P*ae+K*G)-(ac*C+N*ae+M*G);var ah=(Y*C+N*ao+Z*G)-(W*C+P*ao+X*G);var ag=(R*C+M*ao+X*ae)-(T*C+K*ao+Z*ae);var aq=1/(E*aj+ap*ai+af*ah+H*ag);ak[0]=aq*aj;ak[1]=aq*ai;ak[2]=aq*ah;ak[3]=aq*ag;ak[4]=aq*((aa*ap+Y*af+R*H)-(ac*ap+W*af+T*H));ak[5]=aq*((ac*E+N*af+M*H)-(aa*E+P*af+K*H));ak[6]=aq*((W*E+P*ap+X*H)-(Y*E+N*ap+Z*H));ak[7]=aq*((T*E+K*ap+Z*af)-(R*E+M*ap+X*af));ak[8]=aq*((V*al+Q*ab+O*D)-(U*al+S*ab+L*D));ak[9]=aq*((U*z+J*ab+y*D)-(V*z+I*ab+A*D));ak[10]=aq*((S*z+I*al+x*D)-(Q*z+J*al+w*D));ak[11]=aq*((L*z+A*al+w*ab)-(O*z+y*al+x*ab));ak[12]=aq*((S*ad+L*F+U*an)-(O*F+V*an+Q*ad));ak[13]=aq*((A*F+V*B+I*ad)-(J*ad+y*F+U*B));ak[14]=aq*((J*an+w*F+Q*B)-(x*F+S*B+I*an));ak[15]=aq*((x*ad+O*B+y*an)-(A*an+w*ad+L*B));return ak}function s(x,w,A){A=A||new Float32Array(4);for(var z=0;z<4;++z){A[z]=0;for(var y=0;y<4;++y){A[z]+=x[y]*w[y*4+z]}}return A}function q(x,y,C){C=C||new Float32Array(3);var w=y[0];var B=y[1];var A=y[2];var z=w*x[0*4+3]+B*x[1*4+3]+A*x[2*4+3]+x[3*4+3];C[0]=(w*x[0*4+0]+B*x[1*4+0]+A*x[2*4+0]+x[3*4+0])/z;C[1]=(w*x[0*4+1]+B*x[1*4+1]+A*x[2*4+1]+x[3*4+1])/z;C[2]=(w*x[0*4+2]+B*x[1*4+2]+A*x[2*4+2]+x[3*4+2])/z;return C}function a(x,y,B){B=B||new Float32Array(3);var w=y[0];var A=y[1];var z=y[2];B[0]=w*x[0*4+0]+A*x[1*4+0]+z*x[2*4+0];B[1]=w*x[0*4+1]+A*x[1*4+1]+z*x[2*4+1];B[2]=w*x[0*4+2]+A*x[1*4+2]+z*x[2*4+2];return B}function j(x,z,C){C=C||new Float32Array(3);var y=o(x);var w=z[0];var B=z[1];var A=z[2];C[0]=w*y[0*4+0]+B*y[0*4+1]+A*y[0*4+2];C[1]=w*y[1*4+0]+B*y[1*4+1]+A*y[1*4+2];C[2]=w*y[2*4+0]+B*y[2*4+1]+A*y[2*4+2];return C}function e(w,x){x=x||new Float32Array(16);x[0]=w[0];x[1]=w[1];x[2]=w[2];x[3]=w[3];x[4]=w[4];x[5]=w[5];x[6]=w[6];x[7]=w[7];x[8]=w[8];x[9]=w[9];x[10]=w[10];x[11]=w[11];x[12]=w[12];x[13]=w[13];x[14]=w[14];x[15]=w[15];return x}return{copyMatrix:e,makeLookAt:n,subtractVectors:m,normalize:p,cross:c,makeIdentity:r,makeTranspose:k,makeOrthographic:l,makeFrustum:v,makePerspective:d,makeTranslation:u,makeXRotation:i,makeYRotation:t,makeZRotation:h,makeAxisRotation:g,makeScale:b,matrixMultiply:f,makeInverse:o,matrixVectorMultiply:s,transformPoint:q,transformDirection:a,transformNormal:j}}));